app:
  build:
    dockerfile_path: Dockerfile
  encrypted_env_file: aws.env.encrypted
  cached: true
  depends_on:
    - db
  environment:
    MYSQL_HOST: db
  working_dir: /src

db:
  image: mariadb:10
  environment:
    MYSQL_ROOT_PASSWORD: pass
    MYSQL_DATABASE: test
    MYSQL_USER: user
    MYSQL_PASSWORD: pass

lambda:
  image: silintl/awsops:latest
  encrypted_env_file: aws.env.encrypted

tracker:
    image: silintl/app-deployment-tracker-ga:latest
    environment:
        TRACKING_ID: UA-56269387-10

ga4tracker:
  image: silintl/ga-event-tracker:1.0.2
  encrypted_env_file: aws.env.encrypted
  environment:
    GA_MEASUREMENT_ID: G-NY4R8HM3Y3
    GA_CLIENT_ID: speed_snitch_admin_api
    # GA_EVENT_NAME is set by the codeship-steps command
    # Add to the aws.env.encrypted file ... GA_API_SECRET
